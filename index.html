<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#4f46e5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="SolarisFlow: Analisi di progetto e rientro finanziario per impianti fotovoltaici.">
    <title>SolarisFlow - Progettazione e Rientro</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="icon" href="icons/icon-192x192.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }
        .recommendation-output {
            background-color: #f0f7ff;
            border-left: 4px solid #3b82f6;
            padding: 6px 10px;
            font-weight: 500;
            color: #1f2937;
            border-radius: 0 6px 6px 0;
        }
        .calcoli-dettaglio-content ul {
            list-style-type: disc;
            list-style-position: inside;
            padding-left: 0;
            margin-bottom: 1.25rem;
            font-size: 0.875rem;
            color: #4b5563;
        }
        .calcoli-dettaglio-content h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .calcoli-dettaglio-content h4:first-child {
            margin-top: 0;
        }
        .calcoli-dettaglio-content strong {
            font-weight: 700;
            color: #111827;
        }
        #pdf-export-wrapper {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 210mm;
            padding: 20mm 15mm;
            background-color: white;
            color: #333;
            font-size: 10pt;
            line-height: 1.6;
        }
        .app-logo {
            font-size: 2.5rem;
            margin-right: 0.5rem;
            line-height: 1;
        }
        .input-invalid {
            border-color: #ef4444 !important;
        }
        .input-valid {
            border-color: #10b981 !important;
        }
        /* Stile per input text (client-name) */
        input[type="text"] {
             border-radius: 6px;
            border-width: 1px;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            border-color: #d1d5db; /* gray-300 */
        }
        input[type="text"]:focus {
            --tw-ring-color: #4f46e5; /* indigo-500 */
            border-color: #4f46e5;
        }
        
        .container {
            max-width: 1280px;
        }
        header h1 {
            font-size: 3rem;
            font-weight: 700;
            letter-spacing: -0.025em;
        }
        header p {
            font-size: 1.25rem;
            color: #6b7280;
        }
        .bg-white {
            background-color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 12px;
        }
        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.025em;
        }
        /* Titolo sottosezione per O&M */
        h3.subsection-title {
            font-size: 1rem;
            font-weight: 600;
            color: #4b5563; /* gray-600 */
            border-bottom: 1px solid #e5e7eb; /* gray-200 */
            padding-bottom: 0.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        label {
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
        }
        input {
            border-radius: 6px;
            border-width: 1px;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
        }
        small {
            font-size: 0.75rem;
            color: #6b7280;
        }
        .border-l-4 {
            border-left-width: 4px;
            border-radius: 12px;
        }
        .text-3xl {
            font-size: 1.875rem;
            font-weight: 700;
        }
        .text-xl {
            font-size: 1.25rem;
            font-weight: 600;
        }
        .text-lg {
            font-size: 1.125rem;
        }
        .uppercase {
            letter-spacing: 0.05em;
            font-size: 0.75rem;
            font-weight: 500;
        }
        footer p {
            font-size: 0.875rem;
            color: #9ca3af;
        }

        /* Stili per i nuovi pulsanti */
        #calculate-btn, #toggle-details-btn, #hide-details-btn-bottom, #export-pdf-btn, #reset-btn {
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            line-height: 1.5rem;
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            text-align: center;
        }

        #calculate-btn {
            background-color: #1a1a1a;
            color: white;
            border: 1px solid #1a1a1a;
        }
        #calculate-btn:hover {
            background-color: #333333;
            border-color: #333333;
        }

        #toggle-details-btn, #hide-details-btn-bottom {
            background-color: transparent;
            color: #1a1a1a;
            border: 1px solid #d1d5db;
        }
        #toggle-details-btn:hover, #hide-details-btn-bottom:hover {
            background-color: #f9fafb;
            border-color: #9ca3af;
        }
        
        #export-pdf-btn {
            background-color: #2dd4bf;
            color: #1a1a1a;
            border: 1px solid #2dd4bf;
        }
        #export-pdf-btn:hover {
            background-color: #14b8a6;
            border-color: #14b8a6;
            color: white;
        }

        #reset-btn {
            background-color: transparent;
            color: #ef4444;
            border: 1px solid #ef4444;
        }
        #reset-btn:hover {
            background-color: #fef2f2;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div id="pdf-export-wrapper" style="height:1px; overflow:hidden;">
        <div id="pdf-export-content">
             </div>
    </div>
    <div class="container mx-auto p-6 sm:p-10">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-indigo-600 flex items-center justify-center">
                <span class="app-logo text-5xl">☀️</span>SolarisFlow
            </h1>
            <p class="text-xl text-gray-500 mt-3">Analisi professionale di progetto e rientro finanziario per impianti fotovoltaici</p>
        </header>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <form id="calculator-form" class="lg:col-span-1 space-y-8">
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-600">1. Dati Cliente</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="client-name" class="block text-sm font-medium text-gray-700 mb-1">Nome Cliente (per PDF)</label>
                            <input type="text" id="client-name" placeholder="Es. Mario Rossi" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="client-address" class="block text-sm font-medium text-gray-700 mb-1">Indirizzo (per PDF)</label>
                            <input type="text" id="client-address" placeholder="Es. Via Roma 1, 20100 Milano" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <h3 class="subsection-title !mt-6">Dati Bolletta</h3>
                        <div>
                            <label for="consumo-f1" class="block text-sm font-medium text-gray-700 mb-1">Consumo Annuo F1 (kWh)</label>
                            <input type="number" id="consumo-f1" value="1500" min="0" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="consumo-f2" class="block text-sm font-medium text-gray-700 mb-1">Consumo Annuo F2 (kWh)</label>
                            <input type="number" id="consumo-f2" value="1800" min="0" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="consumo-f3" class="block text-sm font-medium text-gray-700 mb-1">Consumo Annuo F3 (kWh)</label>
                            <input type="number" id="consumo-f3" value="1700" min="0" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div class="mt-4 p-3 recommendation-output">
                            <span class="block text-sm font-medium text-gray-700">Consumo Annuo Totale:</span>
                            <span id="consumo-annuo-totale" class="text-lg text-indigo-700">- kWh</span>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-600">2. Parametri Progetto</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="produzione-kwh-kwp" class="block text-sm font-medium text-gray-700 mb-1">Produzione Annua Stimata (kWh/kWp)</label>
                            <input type="number" id="produzione-kwh-kwp" value="1300" min="0" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Es. 1200 Nord, 1400 Centro, 1600 Sud.</small>
                        </div>
                        <div>
                            <label for="autoconsumo-perc-desiderata" class="block text-sm font-medium text-gray-700 mb-1">% Autoconsumo Obiettivo</label>
                            <input type="number" id="autoconsumo-perc-desiderata" value="60" min="0" max="100" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Obiettivo % di produzione da autoconsumare.</small>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-600">3. Progetto Consigliato</h2>
                    <div class="space-y-4">
                        <div class="recommendation-output p-3">
                            <span class="block text-sm font-medium text-gray-700">Potenza PV Consigliata:</span>
                            <span id="potenza-consigliata-result" class="text-lg text-indigo-700">- kWp</span>
                        </div>
                        <div class="recommendation-output p-3">
                            <span class="block text-sm font-medium text-gray-700">Accumulo Consigliato:</span>
                            <span id="accumulo-consigliato-result" class="text-lg text-indigo-700">-</span>
                        </div>
                        <small id="accumulo-consigliato-ragione" class="text-xs text-gray-600 block"></small>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-600">4. Dati Impianto Finale</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="potenza-pv-installata" class="block text-sm font-medium text-gray-700 mb-1">Potenza PV Installata (kWp)</label>
                            <input type="number" id="potenza-pv-installata" value="6" min="0" step="0.1" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="potenza-inverter-installato" class="block text-sm font-medium text-gray-700 mb-1">Potenza Inverter Installata (kW)</label>
                            <input type="number" id="potenza-inverter-installato" value="6" min="0" step="0.1" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="accumulo-installato" class="block text-sm font-medium text-gray-700 mb-1">Accumulo Installato (kWh)</label>
                            <input type="number" id="accumulo-installato" value="0" min="0" step="0.5" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="costo-totale-impianto" class="block text-sm font-medium text-gray-700 mb-1">Costo Totale Impianto (€)</label>
                            <input type="number" id="costo-totale-impianto" value="12000" min="0" step="100" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-600">5. Parametri Finanziari</h2>
                    <div class="space-y-4">
                        <h3 class="subsection-title">Parametri Economici</h3>
                        <div>
                            <label for="costo-energia" class="block text-sm font-medium text-gray-700 mb-1">Costo Quota Energia (€/kWh)</label>
                            <input type="number" id="costo-energia" value="0.25" min="0" step="0.01" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Inserire solo la quota variabile (es. 0.25).</small>
                        </div>
                        <div>
                            <label for="costi-fissi-bolletta" class="block text-sm font-medium text-gray-700 mb-1">Costi Fissi Bolletta (€/Anno)</label>
                            <input type="number" id="costi-fissi-bolletta" value="120" min="0" step="10" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Es. Quota potenza, canone, oneri fissi (es. 120€).</small>
                        </div>
                        <div>
                            <label for="inflazione-annua" class="block text-sm font-medium text-gray-700 mb-1">Inflazione Annua (%)</label>
                            <input type="number" id="inflazione-annua" value="2" min="0" max="10" step="0.1" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Inflazione stimata per i prezzi dell'energia e O&M.</small>
                        </div>
                        <div>
                            <label for="degrado-annuo" class="block text-sm font-medium text-gray-700 mb-1">Degrado Produzione Annua (%)</label>
                            <input type="number" id="degrado-annuo" value="0.5" min="0" max="2" step="0.1" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Degrado stimato della produzione PV.</small>
                        </div>

                        <div>
                            <label for="simulazione-anni" class="block text-sm font-medium text-gray-700 mb-1">Durata Simulazione (Anni)</label>
                            <input type="number" id="simulazione-anni" value="20" min="10" max="40" step="1" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Durata del piano di rientro (default: 20 anni per CER).</small>
                        </div>
                        <h3 class="subsection-title">Costi O&M (Manutenzione)</h3>
                        <div>
                            <label for="costo-manutenzione-annua" class="block text-sm font-medium text-gray-700 mb-1">Costo Manutenzione Annua (€)</label>
                            <input type="number" id="costo-manutenzione-annua" value="100" min="0" step="10" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Es. pulizia, controllo (verrà indicizzato all'inflazione).</small>
                        </div>
                         <div>
                            <label for="costo-sostituzione-inverter" class="block text-sm font-medium text-gray-700 mb-1">Costo Sostituzione Inverter (€)</label>
                            <input type="number" id="costo-sostituzione-inverter" value="1500" min="0" step="100" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                         <div>
                            <label for="anno-sostituzione-inverter" class="block text-sm font-medium text-gray-700 mb-1">Anno Sostituzione Inverter</label>
                            <input type="number" id="anno-sostituzione-inverter" value="12" min="1" max="25" step="1" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Anno in cui si prevede di sostituire l'inverter (es. 12).</small>
                        </div>
                        </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-600">6. Incentivi (PNRR + CER)</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="perc-pnrr" class="block text-sm font-medium text-gray-700 mb-1">% Fondo Perduto PNRR</label>
                            <input type="number" id="perc-pnrr" value="40" min="0" max="100" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div class="p-3 recommendation-output">
                            <span class="block text-sm font-medium text-gray-700">Massimale PNRR Applicato:</span>
                            <span id="massimale-applicato-result" class="text-lg text-indigo-700">- €/kW</span>
                        </div>
                        <div>
                            <label for="tariffa-cer" class="block text-sm font-medium text-gray-700 mb-1">Tariffa Premio CER (€/kWh)</label>
                            <input type="number" id="tariffa-cer" value="0.11" min="0" step="0.01" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="perc-energia-condivisa-cer" class="block text-sm font-medium text-gray-700 mb-1">% Energia Immersa Condivisa (CER)</label>
                            <input type="number" id="perc-energia-condivisa-cer" value="70" min="0" max="100" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                            <small class="text-xs text-gray-500">Stima % energia immessa che viene condivisa nella CER.</small>
                        </div>
                        <div>
                            <label for="prezzo-rid" class="block text-sm font-medium text-gray-700 mb-1">Prezzo Ritiro Dedicato (RID) (€/kWh)</label>
                            <input type="number" id="prezzo-rid" value="0.08" min="0" step="0.01" class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md space-y-4">
                    <button type="button" id="calculate-btn" class="w-full">
                        Calcola Analisi
                    </button>
                    <button type="button" id="export-pdf-btn" class="w-full">
                        Esporta PDF
                    </button>
                    <button type="button" id="toggle-details-btn" class="w-full">
                        Dettaglio Calcoli
                    </button>
                    <button type="button" id="reset-btn" class="w-full">
                        Reset Dati
                    </button>
                </div>
            </form>
            
            <div class="lg:col-span-2 space-y-8">
                <div id="calcoli-dettaglio" class="hidden bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-gray-800">Dettaglio Calcoli</h2>
                    <div id="calcoli-dettaglio-content" class="calcoli-dettaglio-content text-gray-700"></div>
                    <button type="button" id="hide-details-btn-bottom" class="w-full mt-6">
                        Nascondi Dettaglio Calcoli
                    </button>
                </div>

                <div id="situazione-attuale-section" class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-gray-800">Situazione Attuale (Senza Impianto)</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <span class="block text-sm font-medium text-gray-500 uppercase">Consumo Totale Annuo</span>
                            <p id="situazione-consumo-totale" class="text-3xl font-bold text-gray-900">- kWh</p>
                        </div>
                        <div>
                            <span class="block text-sm font-medium text-gray-500 uppercase">Costo Bolletta Annuo Stimato</span>
                            <p id="situazione-costo-attuale" class="text-3xl font-bold text-red-600">- €</p>
                        </div>
                    </div>
                </div>

                <div id="panoramica-section" class="bg-white p-8 rounded-xl shadow-md">
                    <h2 class="text-2xl font-semibold mb-6 text-gray-800">Panoramica: Costi e Benefici (Con Impianto)</h2>
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Dati Tecnici Impianto</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Potenza PV Installata</span>
                            <p id="panoramica-potenza" class="text-xl font-bold text-gray-900">- kWp</p>
                        </div>
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Accumulo Installato</span>
                            <p id="panoramica-accumulo" class="text-xl font-bold text-gray-900">- kWh</p>
                        </div>
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Produzione Annua</span>
                            <p id="panoramica-produzione" class="text-xl font-bold text-gray-900">- kWh</p>
                        </div>
                    </div>
                    <hr class="my-6 border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Costi e Incentivi</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Costo Impianto</span>
                            <p id="panoramica-costo-impianto" class="text-xl font-bold text-gray-900">- €</p>
                        </div>
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Incentivo PNRR (Fondo Perduto)</span>
                            <p id="panoramica-incentivo-pnrr" class="text-xl font-bold text-green-600">- €</p>
                        </div>
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Costo Reale Cliente</span>
                            <p id="panoramica-costo-reale" class="text-xl font-bold text-indigo-600">- €</p>
                        </div>
                    </div>
                    <hr class="my-6 border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Benefici 1° Anno</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Risparmio (Autoconsumo)</span>
                            <p id="panoramica-risparmio-anno1" class="text-xl font-bold text-green-600">- €</p>
                        </div>
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Guadagno (RID + Premio CER)</span>
                            <p id="panoramica-guadagno-anno1" class="text-xl font-bold text-green-600">- €</p>
                        </div>
                        <div>
                            <span class="block text-xs font-medium text-gray-500 uppercase">Totale Benefici 1° Anno</span>
                            <p id="panoramica-totale-anno1" class="text-xl font-bold text-green-600">- €</a:key>
                        </div>
                    </div>
                </div>
                <div id="results-kpi" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-8 rounded-xl shadow-md text-center">
                        <h3 class="text-sm font-medium text-gray-500 uppercase mb-2">Tempo di Rientro</h3>
                        <p id="payback-result" class="text-4xl font-bold text-indigo-600">-</p>
                        <small class="text-gray-500">Anni (include O&M)</small>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-md text-center">
                        <h3 class="text-sm font-medium text-gray-500 uppercase mb-2">Beneficio 1° Anno</h3>
                        <p id="benefit-result" class="text-4xl font-bold text-green-600">-</p>
                        <small class="text-gray-500">Euro (netto O&M)</small>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-md text-center">
                        <h3 id="total-gain-label" class="text-sm font-medium text-gray-500 uppercase mb-2">Guadagno a 25 Anni</h3>
                        <p id="total-gain-result" class="text-4xl font-bold text-gray-900">-</p>
                        <small class="text-gray-500">Euro (netto O&M)</small>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                    <h2 id="table-title" class="text-2xl font-semibold mb-6 text-gray-800">Piano di Rientro (25 Anni)</h2>
                    <div class="h-96 w-full">
                        <canvas id="payback-chart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-md">
                     <h2 id="payback-table-title" class="text-2xl font-semibold mb-6 text-gray-800">Piano di Rientro (Dettaglio)</h2>
                    <div class="overflow-x-auto max-h-[400px]">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50 sticky top-0">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Anno</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Risparmio</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Guadagno (RID+CER)</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Costi (O&M)</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Flusso di Cassa</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cumulato</th>
                                </tr>
                            </thead>
                            <tbody id="payback-table-body" class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td colspan="6" class="p-6 text-center text-gray-500">Inserisci i dati e calcola per vedere i risultati.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>&copy; 2025 SolarisFlow - Prototipo. Non costituisce consulenza finanziaria.</p>
        </footer>
    </div>
    
    <script src="app.js" defer></script>
</body>
</html>